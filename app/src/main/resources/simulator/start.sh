#/bin/sh
#
# simulator mock-up
#
ID=$(cat _input.json | sed -e 's/^.*"id":\([0-9]*\),.*$/\1/')
WORK_DIR="${1}/work/simulator/${ID}"
mkdir -p $WORK_DIR

TIME=$(cat $WORK_DIR/time.dat)

# internal_command $WORK_DIR _input.json
sleep 5
TIME=$(($TIME + 1))
echo "infection ${TIME}:[1,0,0,0,0,0,0,0,0,0,0,3,0,9,1,0,0,0,0,0,0,0,0,0,0,2,5,210,7,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]"
sleep 5
TIME=$(($TIME + 1))
echo "infection ${TIME}:[0,0,0,0,0,0,0,0,0,0,0,0,0,19,1,0,0,0,0,0,0,0,0,0,0,0,6,190,13,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0]"
sleep 5
TIME=$(($TIME + 1))
echo "infection ${TIME}:[0,0,0,0,0,0,0,0,0,0,0,3,0,14,0,0,0,0,0,0,0,0,0,0,0,1,4,211,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]"
sleep 5
TIME=$(($TIME + 1))
echo "infection ${TIME}:[1,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,1,7,318,31,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0]"
sleep 5
TIME=$(($TIME + 1))
echo "infection ${TIME}:[0,0,0,0,0,0,0,0,0,0,0,1,0,24,2,0,1,0,0,0,0,0,0,1,0,1,5,273,17,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]"
echo $TIME > $WORK_DIR/time.dat
echo "[0,0,0,0,0,0,0,0,0,0,0,1,0,24,2,0,1,0,0,0,0,0,0,1,0,1,5,273,17,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]" > preflog.txt
